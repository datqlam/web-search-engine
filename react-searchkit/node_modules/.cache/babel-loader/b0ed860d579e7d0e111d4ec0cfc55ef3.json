{"ast":null,"code":"var _jsxFileName = \"/home/datio/workspace/react-searchkit/src/lib/components/SortBy/SortBy.js\";\n\n/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown } from 'semantic-ui-react';\nimport { ShouldRender } from '../ShouldRender';\nexport default class SortBy extends Component {\n  constructor(props) {\n    super(props);\n\n    this._renderElement = (currentSortBy, options, onValueChange) => {\n      const _options = options.map((element, index) => {\n        return {\n          key: index,\n          text: element.text,\n          value: element.value\n        };\n      });\n\n      return React.createElement(Dropdown, {\n        selection: true,\n        compact: true,\n        options: _options,\n        value: currentSortBy,\n        onChange: (e, {\n          value\n        }) => onValueChange(value),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      });\n    };\n\n    this.onChange = value => {\n      if (value === this.props.currentSortBy) return;\n      this.updateQuerySortBy(value);\n    };\n\n    this.options = props.values;\n    this.defaultValue = this.props.defaultValue;\n    this.defaultValueOnEmptyString = this.props.defaultValueOnEmptyString;\n    this.updateQuerySortBy = props.updateQuerySortBy;\n    this.setInitialState = props.setInitialState;\n    this.renderElement = props.renderElement || this._renderElement;\n  }\n\n  componentDidMount() {\n    if (this.props.currentSortBy === null) {\n      const sortBy = this.props.currentQueryString ? this.defaultValue : this.defaultValueOnEmptyString || this.defaultValue;\n      this.setInitialState({\n        sortBy: sortBy\n      });\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          currentSortBy = _this$props.currentSortBy,\n          loading = _this$props.loading,\n          totalResults = _this$props.totalResults;\n    return React.createElement(ShouldRender, {\n      condition: currentSortBy !== null && !loading && totalResults > 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, this.renderElement(currentSortBy, this.options, this.onChange));\n  }\n\n}\nSortBy.propTypes = {\n  values: PropTypes.array.isRequired,\n  defaultValue: PropTypes.string.isRequired,\n  defaultValueOnEmptyString: PropTypes.string,\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  currentSortBy: PropTypes.string,\n  currentQueryString: PropTypes.string.isRequired,\n  updateQuerySortBy: PropTypes.func.isRequired,\n  setInitialState: PropTypes.func.isRequired,\n  renderElement: PropTypes.func\n};\nSortBy.defaultProps = {\n  defaultValueOnEmptyString: null,\n  currentSortBy: null,\n  renderElement: null\n};","map":{"version":3,"sources":["/home/datio/workspace/react-searchkit/src/lib/components/SortBy/SortBy.js"],"names":["React","Component","PropTypes","Dropdown","ShouldRender","SortBy","constructor","props","_renderElement","currentSortBy","options","onValueChange","_options","map","element","index","key","text","value","e","onChange","updateQuerySortBy","values","defaultValue","defaultValueOnEmptyString","setInitialState","renderElement","componentDidMount","sortBy","currentQueryString","render","loading","totalResults","propTypes","array","isRequired","string","bool","number","func","defaultProps"],"mappings":";;AAAA;;;;;;;AAQA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,YAAT,QAA6B,iBAA7B;AAEA,eAAe,MAAMC,MAAN,SAAqBJ,SAArB,CAA+B;AAC5CK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAqBnBC,cArBmB,GAqBF,CAACC,aAAD,EAAgBC,OAAhB,EAAyBC,aAAzB,KAA2C;AAC1D,YAAMC,QAAQ,GAAGF,OAAO,CAACG,GAAR,CAAY,CAACC,OAAD,EAAUC,KAAV,KAAoB;AAC/C,eAAO;AAAEC,UAAAA,GAAG,EAAED,KAAP;AAAcE,UAAAA,IAAI,EAAEH,OAAO,CAACG,IAA5B;AAAkCC,UAAAA,KAAK,EAAEJ,OAAO,CAACI;AAAjD,SAAP;AACD,OAFgB,CAAjB;;AAGA,aACE,oBAAC,QAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,OAAO,MAFT;AAGE,QAAA,OAAO,EAAEN,QAHX;AAIE,QAAA,KAAK,EAAEH,aAJT;AAKE,QAAA,QAAQ,EAAE,CAACU,CAAD,EAAI;AAAED,UAAAA;AAAF,SAAJ,KAAkBP,aAAa,CAACO,KAAD,CAL3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AASD,KAlCkB;;AAAA,SAoCnBE,QApCmB,GAoCRF,KAAK,IAAI;AAClB,UAAIA,KAAK,KAAK,KAAKX,KAAL,CAAWE,aAAzB,EAAwC;AACxC,WAAKY,iBAAL,CAAuBH,KAAvB;AACD,KAvCkB;;AAEjB,SAAKR,OAAL,GAAeH,KAAK,CAACe,MAArB;AACA,SAAKC,YAAL,GAAoB,KAAKhB,KAAL,CAAWgB,YAA/B;AACA,SAAKC,yBAAL,GAAiC,KAAKjB,KAAL,CAAWiB,yBAA5C;AACA,SAAKH,iBAAL,GAAyBd,KAAK,CAACc,iBAA/B;AACA,SAAKI,eAAL,GAAuBlB,KAAK,CAACkB,eAA7B;AACA,SAAKC,aAAL,GAAqBnB,KAAK,CAACmB,aAAN,IAAuB,KAAKlB,cAAjD;AACD;;AAEDmB,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAKpB,KAAL,CAAWE,aAAX,KAA6B,IAAjC,EAAuC;AACrC,YAAMmB,MAAM,GAAG,KAAKrB,KAAL,CAAWsB,kBAAX,GACX,KAAKN,YADM,GAEX,KAAKC,yBAAL,IAAkC,KAAKD,YAF3C;AAGA,WAAKE,eAAL,CAAqB;AACnBG,QAAAA,MAAM,EAAEA;AADW,OAArB;AAGD;AACF;;AAsBDE,EAAAA,MAAM,GAAG;AAAA,wBAC0C,KAAKvB,KAD/C;AAAA,UACCE,aADD,eACCA,aADD;AAAA,UACgBsB,OADhB,eACgBA,OADhB;AAAA,UACyBC,YADzB,eACyBA,YADzB;AAEP,WACE,oBAAC,YAAD;AACE,MAAA,SAAS,EAAEvB,aAAa,KAAK,IAAlB,IAA0B,CAACsB,OAA3B,IAAsCC,YAAY,GAAG,CADlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGG,KAAKN,aAAL,CAAmBjB,aAAnB,EAAkC,KAAKC,OAAvC,EAAgD,KAAKU,QAArD,CAHH,CADF;AAOD;;AAnD2C;AAsD9Cf,MAAM,CAAC4B,SAAP,GAAmB;AACjBX,EAAAA,MAAM,EAAEpB,SAAS,CAACgC,KAAV,CAAgBC,UADP;AAEjBZ,EAAAA,YAAY,EAAErB,SAAS,CAACkC,MAAV,CAAiBD,UAFd;AAGjBX,EAAAA,yBAAyB,EAAEtB,SAAS,CAACkC,MAHpB;AAIjBL,EAAAA,OAAO,EAAE7B,SAAS,CAACmC,IAAV,CAAeF,UAJP;AAKjBH,EAAAA,YAAY,EAAE9B,SAAS,CAACoC,MAAV,CAAiBH,UALd;AAMjB1B,EAAAA,aAAa,EAAEP,SAAS,CAACkC,MANR;AAOjBP,EAAAA,kBAAkB,EAAE3B,SAAS,CAACkC,MAAV,CAAiBD,UAPpB;AAQjBd,EAAAA,iBAAiB,EAAEnB,SAAS,CAACqC,IAAV,CAAeJ,UARjB;AASjBV,EAAAA,eAAe,EAAEvB,SAAS,CAACqC,IAAV,CAAeJ,UATf;AAUjBT,EAAAA,aAAa,EAAExB,SAAS,CAACqC;AAVR,CAAnB;AAaAlC,MAAM,CAACmC,YAAP,GAAsB;AACpBhB,EAAAA,yBAAyB,EAAE,IADP;AAEpBf,EAAAA,aAAa,EAAE,IAFK;AAGpBiB,EAAAA,aAAa,EAAE;AAHK,CAAtB","sourcesContent":["/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown } from 'semantic-ui-react';\nimport { ShouldRender } from '../ShouldRender';\n\nexport default class SortBy extends Component {\n  constructor(props) {\n    super(props);\n    this.options = props.values;\n    this.defaultValue = this.props.defaultValue;\n    this.defaultValueOnEmptyString = this.props.defaultValueOnEmptyString;\n    this.updateQuerySortBy = props.updateQuerySortBy;\n    this.setInitialState = props.setInitialState;\n    this.renderElement = props.renderElement || this._renderElement;\n  }\n\n  componentDidMount() {\n    if (this.props.currentSortBy === null) {\n      const sortBy = this.props.currentQueryString\n        ? this.defaultValue\n        : this.defaultValueOnEmptyString || this.defaultValue;\n      this.setInitialState({\n        sortBy: sortBy,\n      });\n    }\n  }\n\n  _renderElement = (currentSortBy, options, onValueChange) => {\n    const _options = options.map((element, index) => {\n      return { key: index, text: element.text, value: element.value };\n    });\n    return (\n      <Dropdown\n        selection\n        compact\n        options={_options}\n        value={currentSortBy}\n        onChange={(e, { value }) => onValueChange(value)}\n      />\n    );\n  };\n\n  onChange = value => {\n    if (value === this.props.currentSortBy) return;\n    this.updateQuerySortBy(value);\n  };\n\n  render() {\n    const { currentSortBy, loading, totalResults } = this.props;\n    return (\n      <ShouldRender\n        condition={currentSortBy !== null && !loading && totalResults > 1}\n      >\n        {this.renderElement(currentSortBy, this.options, this.onChange)}\n      </ShouldRender>\n    );\n  }\n}\n\nSortBy.propTypes = {\n  values: PropTypes.array.isRequired,\n  defaultValue: PropTypes.string.isRequired,\n  defaultValueOnEmptyString: PropTypes.string,\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  currentSortBy: PropTypes.string,\n  currentQueryString: PropTypes.string.isRequired,\n  updateQuerySortBy: PropTypes.func.isRequired,\n  setInitialState: PropTypes.func.isRequired,\n  renderElement: PropTypes.func,\n};\n\nSortBy.defaultProps = {\n  defaultValueOnEmptyString: null,\n  currentSortBy: null,\n  renderElement: null,\n};\n"]},"metadata":{},"sourceType":"module"}